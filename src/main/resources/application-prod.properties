# ===================================================================
# PRODUCTION ENVIRONMENT PROPERTIES (application-prod.properties)
# ===================================================================
# To activate, run with: --spring.profiles.active=prod

# --- Server Configuration (NEW) ---
# Explicitly set the server port. Default is 8080.
server.port=8080
# Enable graceful shutdown to allow in-flight requests to complete before the app stops.
server.shutdown=graceful

# --- Database ---
# Connects to the secure, highly-available production database cluster.
spring.datasource.url=jdbc:mysql://prod-db.striveconnect.com:3306/strive_connect_prod_db
spring.datasource.username=prod_user
# Secrets MUST be provided via environment variables or a secure vault.
spring.datasource.password=${DB_PASSWORD}

# --- Database Connection Pool Tuning (NEW BEST PRACTICE) ---
# Configure the Hikari connection pool for production performance.
# Maximum number of connections in the pool.
spring.datasource.hikari.maximum-pool-size=20
# Minimum number of idle connections that Hikari tries to maintain.
spring.datasource.hikari.minimum-idle=5
# Maximum time (in ms) a client will wait for a connection.
spring.datasource.hikari.connection-timeout=30000
# Maximum time (in ms) a connection can sit idle in the pool.
spring.datasource.hikari.idle-timeout=600000
# Maximum lifetime (in ms) of a connection in the pool.
spring.datasource.hikari.max-lifetime=1800000

# --- JPA & Hibernate ---
# 'none' is the safest option. All database changes MUST be handled by controlled migration scripts (e.g., Flyway, Liquibase).
spring.jpa.hibernate.ddl-auto=none
# SQL logging is turned off for performance.
spring.jpa.show-sql=false

# --- JWT Secret ---
# The JWT secret MUST be provided via a secure environment variable or vault.
jwt.secret=${JWT_SECRET}

# --- Logging ---
# Set to WARN to only log significant issues, reducing log volume and cost.
logging.level.com.striveconnect=WARN
# Log to a file for persistent audit and error records.
logging.file.name=/var/log/strive-connect/app.log

# --- Actuator ---
# Do not expose any actuator endpoints by default for maximum security.
# If needed, expose only 'health' and protect it behind a firewall or admin authentication.
management.endpoints.web.exposure.include=health

# --- API Documentation (NEW BEST PRACTICE) ---
# Disable Swagger UI in production to prevent exposing API details publicly.
springdoc.swagger-ui.enabled=false
springdoc.api-docs.enabled=false

